<!DOCTYPE html>
<html lang="pt-br">
<head>

<meta charset="UTF-8">
<title>Sistema da Biblioteca</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>

body{
background:#f5f5f5;
font-family:Segoe UI;
margin:0;
}

.topo{
background:#8B2E2E;
color:white;
padding:15px;
display:flex;
align-items:center;
gap:15px;
font-size:22px;
font-weight:bold;
}

.menu-btn{
font-size:28px;
cursor:pointer;
}

.sidebar{
position:fixed;
left:-260px;
top:0;
width:260px;
height:100%;
background:#8B2E2E;
color:white;
padding:20px;
transition:0.3s;
z-index:1000;
}

.sidebar-header{
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:20px;
}

.fechar{
font-size:22px;
cursor:pointer;
}

.sidebar a{
display:block;
color:white;
text-decoration:none;
padding:12px;
margin-bottom:10px;
border-radius:6px;
}

.sidebar a:hover{
background:#6f1f1f;
}

.livro-card{
background:white;
border-radius:10px;
padding:10px;
text-align:center;
box-shadow:0 2px 8px rgba(0,0,0,0.1);
transition:0.2s;
height:100%;
}

.livro-card:hover{
transform:scale(1.05);
}

.livro-img{
height:180px;
width:100%;
object-fit:cover;
border-radius:6px;
}

.titulo{
font-weight:bold;
margin-top:10px;
}

.autor{
font-size:14px;
color:#555;
}

.genero{
font-size:13px;
color:#8B2E2E;
font-weight:bold;
}

.resultado{
margin-top:10px;
color:#444;
}

</style>

</head>

<body>

<!-- MENU LATERAL -->

<div class="sidebar" id="sidebar">

<div class="sidebar-header">

<h4>Menu</h4>

<span class="fechar" onclick="fecharMenu()">‚Üê</span>

</div>

<a href="index.html">üè† In√≠cio</a>

<a href="cadastrar_livro.html">üìö Cadastrar Livro</a>

<a href="cadastrar_leitor.html">üë§ Cadastrar Leitor</a>

<a href="emprestimo.html">üì• Novo Empr√©stimo</a>

<a href="livros_emprestados.html">üìñ Livros Emprestados</a>

<a href="relatorio.html">üìä Relat√≥rio</a>

</div>


<!-- TOPO -->

<div class="topo">

<span class="menu-btn" onclick="abrirMenu()">‚ò∞</span>

Sistema da Biblioteca

</div>


<div class="container mt-4">

<h4 class="mb-3">Pesquisar Livro ou Leitor</h4>

<input type="text" id="busca" class="form-control mb-2"
placeholder="Digite o nome do livro, autor ou leitor..."
onkeyup="buscar()">

<div class="resultado" id="resultadoBusca"></div>

<h4 class="mt-4 mb-3">Livros Dispon√≠veis</h4>

<div class="row g-4" id="listaLivros"></div>

</div>


<script>

function abrirMenu(){
document.getElementById("sidebar").style.left="0"
}

function fecharMenu(){
document.getElementById("sidebar").style.left="-260px"
}


let livros = JSON.parse(localStorage.getItem("livros")) || []
let leitores = JSON.parse(localStorage.getItem("leitores")) || []


function mostrarLivros(lista){

let div = document.getElementById("listaLivros")

div.innerHTML=""

if(lista.length === 0){
div.innerHTML="<p>Nenhum livro encontrado</p>"
return
}

lista.forEach(l=>{

if(l.disponivel !== false){

div.innerHTML+=`

<div class="col-md-2">

<div class="livro-card">

<img src="${l.capa}" class="livro-img">

<div class="titulo">${l.titulo}</div>

<div class="autor">${l.autor}</div>

<div class="genero">${l.genero || ""}</div>

</div>

</div>

`

}

})

}


function buscar(){

let termo = document.getElementById("busca").value.toLowerCase()

let resultadoLivros = livros.filter(l =>
l.titulo.toLowerCase().includes(termo) ||
l.autor.toLowerCase().includes(termo)
)

let resultadoLeitores = leitores.filter(l =>
l.nome.toLowerCase().includes(termo)
)

let texto = ""

if(resultadoLeitores.length > 0){

texto = "Leitor encontrado: "

resultadoLeitores.forEach(l=>{
texto += l.nome + " "
})

}

document.getElementById("resultadoBusca").innerText = texto

mostrarLivros(resultadoLivros)

}


mostrarLivros(livros)

</script>

</body>
</html>